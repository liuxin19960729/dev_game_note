## 以太网的封装格式
```
1.目的mac(6byte)
88 66 5a 37 59 36

2.源目的mac地址(6byte)
50 0f f5 06 bd 40


3.类型 (2byte)
  ipv4 08 00
  arp 08 06   
  rarp 08 35

4.数据
ipv4
(46-1500)
    数据不够范围+00
    数据超出进行数据分片

arp rarp
  data(28byte)+pad(18byte)

5.CRC(4 byte)

```

## 802.3格式的数据封装
```
1.目的mac(6byte)
88 66 5a 37 59 36

2.源目的mac地址(6byte)
50 0f f5 06 bd 40

3.长度 (2byte)
    后序字节的长度（（不包括CRC)的长度
  由于以太网度类型和这个长度数据没有重合所以可以区分两种网络

4.LLC(3byte)
  目的服务访问点 dsap  0xaa
  源服务访问点  ssap   0xaa
  ctrl  0x03
5.orgode(3byte)

(5. 6. 总的称呼是snap)

6.类型 (2byte)
  ipv4 08 00
  arp 08 06   
  rarp 08 35

4.数据
ipv4
(38-1492)
    数据不够范围+00
    数据超出进行数据分片

arp rarp
  data(28byte)+pad(10byte)

5.CRC(4 byte)
         检查码


```

## 以太网 和 802.3
```
1.数据长度限制
以太网 [46,1500]    802.3 [28,1942]
数据部分有最小限制和最大限制
  不够+pad(0x00)把他填到最小要求的数据长度
  大于 分片



```

## 回环接口
```
为什么要有回环
   1.client 和 server 在同一台机器 是可以访问(TCP IP 进行通信)

   127.x.x.x 是专门给回环预留的  (在pc 上是ping 127开头的任意ip是能ping 通的)


回环执行的流程原理
    ip函数-->[ip输入队列]
             if 回环地址  ---------->ip输入函数
             else
                目的ip 是否与广播或多播地址(广播和多播本省要传输给自己)相同  if(相同) 复制一分数据报(目的ip 自己) 传给回环程序-->检测到时自己-->ip输入函数

                剩下的数据都是要发送给别人的数据 -->arp 找到目的mac地址-->封装   目的mac 和 源mac 等数据到数据包-->发送


注意 我们接受到数据ip 和本机相同 发送数据的目的ip和本机相同都被被放入到回环驱动程序 ip输入队列中
```


## 最大的MTU
```
链路层称为
以太网 1500(数据) 和 802.3 1942就是最大的MTU
ip 层 数据大于链路层的最大mtu --->对ip层的数据进行分片(每片要求小于最大mtu)


```
##  路径MTU
```
a(pc)--网络1--网络2--b(pc)

a和b通信 之间会通过 网络1 和网路2 他们之间的mtu可能不相等 但是路劲 mtu 是两个网络最小的mtu(路劲mtu)
a->b
b->a
之间的路劲mtu可能不同(不对称)


```

## SLIP 串行线路
```
定义：串行线路上对ip数据报的封装

数据格式
10xc0---------0xc0--------------0xdb---------1(ip数据报)


0xc0:END 特殊字符结束

为什么大多数在在数据报的开始就传一个0xc0:END？？
   为了防止说一句报来到之前的线路当成数据报的内容

ip数据报发现有end 就会吧她替换成 0xdb (ESC)0xdc 

当ip 报文中发现有0xdb (ESC)  就会连续上传两个字节
0xdb (ESC)0xdc 


```