# CPU的高速缓存

```
1.现代的CPU频率大大的提升,但是内存总线的频率，内存芯片却没有成比例的提升(内存不是说造不出更快的,只是因为太贵)。




sram(高速缓存) 是cpu自动管理的内存。存储的是主内存中可能被cpu使用的数据。



```



## 高速缓存的位置
![高速缓存位置1](./imgs/g_s_buffer.png)
```
上图是高速缓存最简单的配置图


早期的一些系统就是类似的一些架构,cpu-core 不在连接到main-memory(更早的系统高速缓存直接直接连接总线)数据的读取和存储经过高速缓存。上图高速缓存和主存之间的总线叫做FSB。


1993年以来intel一直坚持使用独立的数据和代码的高速缓存。
为什么要使用独立的缓存？？
    所需的代码和数据的内存区域是几乎相互独立的

```
![高速缓存位置2](./imgs/g_s_buffer2.png)

```
上图介绍了cpu 二级缓存的出现，甚至有些系统现在存在3级缓存
二级缓存容量比一级缓存大，然是访问的速度比一级缓存慢。



介绍缓存术语
    L1d  一级数据缓存
    l1i 一级指令缓存



    请注意，这只是示意图，真正的数据流并不需要流经上级缓存。CPU的设计者们在设计高速缓存的接口时拥有很大的自由。而程序员是看不到这些设计选项的

```


![多核cpu](./imgs/g_s_buffer3.png)
```
1.每个核心有可以有个线程
2.核心拥有独立的硬件资源
3.核心可以完全独立地运行。而线程只是共享资源
4.Intel的线程只有独立的寄存器，而且还有限制——不是所有寄存器都独立，有些是共享的


上图可知
两个cpu(cpu之间不共享任何资源) 
每个cpu有两个核心
每个核心有两个线程
线程共享一级缓存和二级缓存(同一个cpu之间的核心也共享L1,L2)


```
## 3.2 高级的缓存操作
```
对程序实现者来说这些缓存是不可见的(默认情况下,cpu核心所有数据读或写都存储在缓存中)
对程序设计来说设计者可以绕过某些缓存



```
