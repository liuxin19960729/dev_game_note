# 享元模式
问题

![造成的问题](./imgs/xiangyuan1.png)




解决问题

![解决问题](./imgs/xiangyuan2.png)


```ts
问题：
    屏幕要显示森林

    每棵树都有一系列与之相关的位：

        定义树干，树枝和树叶形状的多边形网格。
        树皮和树叶的纹理。
        在森林中树的位置和朝向。
        大小和色彩之类的调节参数，让每棵树都看起来与众不同。

    我们讨论的是成千上万的树，每棵都由上千的多边形组成。 就算有足够的内存描述森林，渲染的过程中，CPU到GPU的部分也太过繁忙了。
    数据量非常的大




解决方法

    我们可以通过显式地将对象切为两部分来更加明确地模拟。 第一，将树共有的数据拿出来分离到另一个类中：

    


第一，将树共有的数据拿出来分离到另一个类中：
    class TreeModel
    {
       private Mesh mesh_;
       private Texture bark_;
       private Texture leaves_;
    }


    TreeModel这个类是共享的类，每一个Tree都可以引用获取TreeModel对象用于共享。





    class Tree
    {
        private TreeModel* model_;
        private Vector position_;
        private double height_;
        private double thickness_;
        private Color barkTint_;
        private Color leafTint_;
    }



这些共享数据放到主内存对渲染毫无帮助我应该在森林显示到屏幕之前先让显卡识别到这些共享数据




```