# IO概念
```
jdk 1.4 引入nio

```

## 缓冲区操作
```
进程IO操作--> 向 os kernel 发出操作请求--> os 接收到请求 操作对应的驱动(网络 disk)-->写 buff数据向驱动写 读把驱动硬件的数据读取到buf里面。



例 进程执行 read()函数到disk(磁盘读取数据)

read() 用户态-->切换到内核 -->向磁盘发出指令

磁盘接收到指令-->磁盘控制器把数据写到缓冲区(DMA完成和cpu无关)-->缓冲区数据装满

内核操作  内核的临时缓冲区-->把数据拷贝到用户指令的缓冲区



内核可能会进行预读取数据 把数据放到内核的缓冲区
当我们执行read()的时候有可能不需要进行磁盘数据读取，直接到缓存里面拿预读取缓存的数据



为什么硬件不把数据直接放到用户空间的缓存?
    1.硬件不能访问用户空间
    2.磁盘的数据块大小是固定的(也就是说每次读都只能读以数据块为单位大小)
       用户读取数据大小是不固定的 ，若直接读取可能读取数据大小不准确 可能多度少读 这种情况

       而 os kernel 他不仅能访问硬件 他还是个管理者 读取磁盘里面的数据 然后根据用户的请求要求对数据进行分割 组合，这样用户拿到的数据就是用户需要的数据   注意：os kernel 充当的是管理者 中间人的角色
       
```

## 发散 / 汇聚
```
作用  os使缓冲区的数据组装和分解更加高效

```