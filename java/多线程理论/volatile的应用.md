## volatile的应用
```java
volatile 在多处理器里面保证了共享内存的可见性

可见性:当一个线程修改了这个值，另一个线程会读到这个线程修改的值

```

volatile的定义和原理

```
例  volatile Singleton sin=new SingleTon();

转化位汇编为 :
0x01a3de1d: movb $0×0,0×1104800(%esi);0x01a3de24: lock addl $0×0,(%esp);


lock 前缀
  lock 指令
     在cpul里面提供两种锁  使用lock指令 但是锁的类型由cpu自行决定
        总线锁
            自由当前线程能对内存进行操作
            其他线程阻塞
            写到内存之后其他的缓存值就失效了(一致性协议)
        缓存锁
            1，缓存锁机制不允许两个或两个以上的线程修改同一地址
            2，当这个地址修改了之后，其他cpu和兴（线程里面的）这个地址的缓存全部失效需要到地址重新拿取  (这个拿取的值就是修改的最新值)一致性协议


一致性协议
  每个cpu在总线通过嗅探查看自己的缓存是否过期
    MOESI，MESIF....协议


```



